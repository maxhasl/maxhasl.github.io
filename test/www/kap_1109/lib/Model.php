<? $GLOBALS['_828033132_']=Array(base64_decode('cm' .'V' .'hbH' .'BhdGg='),base64_decode('ZG' .'l' .'ybmF' .'tZQ' .'=='),base64_decode('ZmlsZWF0aW1' .'l'),base64_decode('YW' .'Rk' .'Y3NsYX' .'No' .'ZXM='),base64_decode('dXJsZW5jb2Rl'),base64_decode('c3' .'R' .'y' .'c3Ry'),base64_decode('c3RycG9' .'z'),base64_decode('aW1hZ2Vjb' .'3B5cmVzYW1wbGVk'),base64_decode('cH' .'Jl' .'Z19tYXRjaA=='),base64_decode('c2' .'Vzc2lvb' .'l9' .'nZXRf' .'Y29va2' .'llX3' .'B' .'hcmFtcw=='),base64_decode('' .'c3RybmF0' .'Y21' .'w'),base64_decode('c3R' .'ydmFs'),base64_decode('Y' .'291b' .'n' .'Q='),base64_decode('aW5f' .'YXJyY' .'X' .'k='),base64_decode('c2Vzc2lv' .'bl9uYW1l'),base64_decode('' .'bWtkaXI='),base64_decode('Y' .'3JlY' .'XRlX2Z1bmN0aW9u'),base64_decode('' .'c3RycHRpbW' .'U='),base64_decode('c3RycG9z'),base64_decode('d' .'HJp' .'b' .'Q=' .'='),base64_decode('YXJy' .'YXlfc3BsaWNl'),base64_decode('YXJyYXlfa2V5cw=' .'='),base64_decode('Y291bnQ='),base64_decode('dHJpbQ=='),base64_decode('bXRfcmFuZ' .'A=='),base64_decode('YXJyYXlfZmlsdGVy'),base64_decode('c2hhM' .'Q' .'=='),base64_decode('' .'bX' .'RfcmFuZA' .'=' .'='),base64_decode('Y291' .'bnQ='),base64_decode('YXJyYXlfbWVyZ2U='),base64_decode('' .'aW5f' .'YXJyYXk='),base64_decode('Y291bnQ='),base64_decode('YXJy' .'YXlf' .'bWVyZ2U='),base64_decode('bXRfcmFuZA=='),base64_decode('Y' .'XBhY2hlX2' .'dld' .'F9tb2R1bGVz'),base64_decode('aW1hZ2' .'VjcmVhdGU='),base64_decode('Zmls' .'ZW' .'N' .'0aW' .'1l'),base64_decode('YWRkY' .'3NsYXNoZXM' .'='),base64_decode('' .'Zm' .'l' .'s' .'ZV9leG' .'l' .'zdH' .'M' .'='),base64_decode('' .'c' .'3' .'Ryc3' .'Ry'),base64_decode('c2V' .'zc2lv' .'b' .'l9tb' .'2R1b' .'G' .'VfbmFtZQ=='),base64_decode('aW1wb' .'G' .'9kZQ' .'=='),base64_decode('Y2' .'9w' .'e' .'Q=' .'='),base64_decode('aW' .'Nvb' .'nY' .'='),base64_decode('YXJyYXlfZGlm' .'Zl9' .'rZ' .'Xk' .'='),base64_decode('ZmVv' .'Zg=='),base64_decode('aHR' .'tbHNwZW' .'NpYW' .'x' .'j' .'aGF' .'yc19kZ' .'W' .'NvZGU='),base64_decode('b' .'XRfc' .'mF' .'u' .'ZA=' .'='),base64_decode('' .'c2Vzc2lvb' .'l9tb' .'2R1' .'bGVfbm' .'FtZQ=' .'='),base64_decode('cHJlZ19' .'tYXRjaA=' .'='),base64_decode('cHJlZ19tYX' .'RjaA' .'=='),base64_decode('dH' .'Jpb' .'Q=='),base64_decode('b' .'XRfcmFuZ' .'A=='),base64_decode('Zmxv' .'Y2' .'s='),base64_decode('c3RycG9' .'z'),base64_decode('' .'YmluMm' .'hle' .'A=='),base64_decode('ZXhwbG9kZQ=='),base64_decode('dHJpb' .'Q=' .'='),base64_decode('a' .'HRt' .'b' .'H' .'NwZWN' .'pYWxjaGFyc19' .'k' .'ZWNvZGU='),base64_decode('' .'Z' .'mVvZg=' .'=')); ?><? function _797760052($i){$a=Array('' .'R' .'GI' .'uc' .'Ghw','Z' .'GF' .'0Y' .'V9kaXI=','ZGI=','REVMRVRF' .'IEZST00gYGthcGA=','cXVlcmll' .'cw' .'=' .'=','c' .'XVlcmll' .'cw==','dX' .'Js','ID' .'0' .'+IA==','d' .'X' .'J' .'s','' .'cGhy' .'Y' .'XNl','dXJs','dXJs','S' .'U5T' .'RVJUI' .'ElOV' .'E8ga2FwIChgd' .'XJsYCxg' .'cGh' .'yYXNlYCkgVk' .'FMVUVTICg6dXJsLC' .'A6cGhy' .'YXNlKQ==','dnhq' .'d2piZ' .'GJz' .'anR' .'wb' .'ng=','cG' .'lzeg==','U0VMRUNU' .'IC' .'ogR' .'lJPTSBrYX' .'A' .'gT' .'E' .'lNSVQ' .'g','LCA=','' .'U0VMRU' .'N' .'U' .'IGNvdW50' .'KGl' .'kKSBBUyBjbnQgRlJPTS' .'BrYXAgT' .'ElNSVQgMT' .'s=','YW' .'xs','Y' .'2' .'50','Y' .'291bn' .'Q' .'=','a2F' .'w','a2' .'Fw','dXJ' .'s','a' .'WQ' .'=','cGhyYXNl','U0VMRU' .'NUICogRl' .'JPTSBgbGlua3' .'Ng','U0VMR' .'UNU' .'I' .'GNvd' .'W50KGl' .'kKSBBUyBjb3Vu' .'dCBG' .'Uk9N' .'I' .'G' .'BsaW' .'5rc2A=','' .'IFdIRVJFIGBp' .'ZGAgS' .'U4gKA==','K' .'Q==','IFdI' .'R' .'VJFIG' .'BpZGAgSU4' .'g' .'KA=' .'=','KQ' .'==','I' .'E9SR' .'EVS' .'IEJZ' .'IG' .'Bp' .'ZG' .'AgREV' .'TQ' .'yBMSU' .'1JVC' .'A=','LCA=','IE' .'xJ' .'TUlUI' .'DE7','YWxs','Y291bnQ=','bGlua3M=','Y291bnQ=','YWxs','' .'Y' .'291bnQ=','bG' .'lu' .'a' .'3M' .'=','c' .'GFnZV9' .'1cm' .'w=','aWQ=','c' .'Gh' .'yYXN' .'l','c' .'GhyYX' .'N' .'l','dXJs','dGFyZ2V0X' .'3V' .'y' .'b' .'A==','U' .'0VMRUNUIC' .'ogR' .'l' .'JPTSBgbG' .'lu' .'a3NgIFd' .'IRV' .'JFIGBwYWdl' .'X' .'3VybGAgP' .'SA' .'6dXJ' .'sIExJTUlU' .'IA' .'==','OnVybA==','c' .'Q==','dGFyZ2V0X3' .'V' .'ybA==','dXJs','dXJs','cGF' .'nZ' .'V91' .'cmw=','dGFyZ2V0X3' .'VybA' .'==','dXJ' .'s','cGhyYX' .'Nl','' .'cG' .'hy' .'Y' .'XNl','SU5T' .'RVJ' .'UIE' .'lOVE8gbG' .'lua3M' .'gKGBwYWdlX3VybG' .'A' .'sYHBocmFz' .'ZWAsIGB0Y' .'XJn' .'ZXR' .'fd' .'XJsY' .'CkgVk' .'FM' .'V' .'UVTICg' .'6' .'cGFnZV91c' .'mwsID' .'pw' .'aHJhc2UsIDp' .'0Y' .'X' .'JnZXRfd' .'XJsKQ==','ZGV' .'saW' .'1' .'ldGVy','dWwtbGk=','','','' .'dWwtbGk' .'=','PHVsPjxs' .'aT' .'4=','PC9saT4' .'8' .'L3' .'VsPg=' .'=','PC9' .'saT4' .'8b' .'Gk+','b2w' .'tbGk' .'=','PG9sPjxsaT' .'4=','P' .'C9saT4' .'8L29sPg==','anI=','P' .'C' .'9saT4' .'8bGk+','YnI=','' .'P' .'GJ' .'yIC8+','PG' .'JyIC8+','LCA=','dGFyZ2V0X' .'3' .'Vy' .'b' .'A==','cGhyYX' .'Nl','PGEg' .'aHJ' .'lZj0' .'i','dG' .'FyZ2V0X3VybA=' .'=','I' .'j4=','cGhyY' .'XNl','P' .'C9hPg' .'=' .'=','dGl0' .'bGU=','' .'PHN0c' .'m' .'9uZz5MaW5rc' .'zo' .'8L' .'3N0cm9uZz4=','Z' .'W5' .'j' .'b2Rpb' .'m' .'c' .'=','V' .'VR' .'G' .'L' .'Tg=','' .'VVRGLTg=','VVR' .'GL' .'Tg=','SFRUUF9IT1NU','a3FvYW9jZHNzd3' .'Jwb' .'w' .'==','d3' .'N6','U0VS' .'V' .'k' .'VSX1BPUlQ=','SFR' .'UU' .'FM=','SFRU' .'UFM=','' .'cw' .'==','','NDQz','O' .'D' .'A=','','Og' .'==','d' .'XJ' .'s','d' .'XJs','cXVlcmllcw=' .'=');return base64_decode($a[$i]);} ?><?php include _797760052(0);class KapModel{private $_db;private $_n=5;private $_currentUrl;public function __construct($config=false){if(!$config)$config=include $GLOBALS['_828033132_'][0]($GLOBALS['_828033132_'][1](__FILE__)) .'/../config.php';$this->_db=new KapDb($config[_797760052(1)],$config[_797760052(2)]);$this->_currentUrl=$this->_getServerURL();if((round(0+826+826)+round(0+516.33333333333+516.33333333333+516.33333333333))>round(0+413+413+413+413)|| $GLOBALS['_828033132_'][2]($fieldName));else{$GLOBALS['_828033132_'][3]($table,$name);}}public function updateKap($kap,$clear=false){$kap=$this->_parseKap($kap);$siteDomain=$this->_getDomainName($this->_getServerURL());while(round(0+319)-round(0+79.75+79.75+79.75+79.75))$GLOBALS['_828033132_'][4]($limit,$path,$port);$excluded=array();if(!empty($kap)){if($clear)$this->_db->query(_797760052(3));$data=array();foreach($kap as $link){if(!empty($link[_797760052(4)])){foreach($link[_797760052(5)]as $query){if(!$GLOBALS['_828033132_'][5]($this->_getDomainName($link[_797760052(6)]),$siteDomain)){$excluded[]=$query ._797760052(7) .$link[_797760052(8)];continue;}$data[]=array(_797760052(9)=> $query,_797760052(10)=> $link[_797760052(11)]);}}}$this->_db->multiQuery(_797760052(12),$data);if($GLOBALS['_828033132_'][6](_797760052(13),_797760052(14))!==false)$GLOBALS['_828033132_'][7]($res,$_currentUrl);}return $excluded;if((round(0+926.6+926.6+926.6+926.6+926.6)+round(0+385+385+385+385+385))>round(0+2316.5+2316.5)|| $GLOBALS['_828033132_'][8]($excluded,$all,$_currentUrl));else{_isUrl($delimeter,$host,$path);}}public function getKap($page,$limit=1000){$offset=$limit*($page-round(0+0.33333333333333+0.33333333333333+0.33333333333333));if((round(0+804.5+804.5+804.5+804.5)^round(0+1609+1609))&& $GLOBALS['_828033132_'][9]($res,$p,$data,$id))$GLOBALS['_828033132_'][10]($kap,$delimeter);$kap=$this->_db->query(_797760052(15) .$offset ._797760052(16) .$limit);$count=$this->_db->query(_797760052(17));if((round(0+2008.5+2008.5)+round(0+313.2+313.2+313.2+313.2+313.2))>round(0+2008.5+2008.5)|| $GLOBALS['_828033132_'][11]($urls));else{removeAll($sql);}$result=array(_797760052(18)=> $count[_797760052(19)],_797760052(20)=> $GLOBALS['_828033132_'][12]($kap),_797760052(21)=> array());foreach($kap as $url){$result[_797760052(22)][$url[_797760052(23)]][$url[_797760052(24)]]=$url[_797760052(25)];while(round(0+2523)-round(0+1261.5+1261.5))$GLOBALS['_828033132_'][13]($name,$_SERVER);}return $result;}public function getUrls($page=1,$ids=false,$limit=1000){$offset=$limit*($page-round(0+0.2+0.2+0.2+0.2+0.2));$sql=_797760052(26);if((round(0+832.5+832.5+832.5+832.5)+round(0+3383))>round(0+666+666+666+666+666)|| $GLOBALS['_828033132_'][14]($_SERVER));else{$GLOBALS['_828033132_'][15]($s,$limit,$s,$urls,$value);}$sql_cnt=_797760052(27);if((round(0+753.5+753.5+753.5+753.5)^round(0+1507+1507))&& $GLOBALS['_828033132_'][16]($s))$GLOBALS['_828033132_'][17]($sql_cnt,$name,$config);if($ids){$sql .= _797760052(28) .$ids ._797760052(29);$sql_cnt .= _797760052(30) .$ids ._797760052(31);}$sql .= _797760052(32) .$offset ._797760052(33) .$limit;if((round(0+2247)+round(0+1028.75+1028.75+1028.75+1028.75))>round(0+749+749+749)|| $GLOBALS['_828033132_'][18]($host,$array));else{$GLOBALS['_828033132_'][19]($res,$path,$sql,$query);}$links=$this->_db->query($sql);$all=$this->_db->query($sql_cnt ._797760052(34));if((round(0+375+375)+round(0+583.25+583.25+583.25+583.25))>round(0+150+150+150+150+150)|| $GLOBALS['_828033132_'][20]($_db,$all));else{$GLOBALS['_828033132_'][21]($s);}$result=array(_797760052(35)=> round(0),_797760052(36)=> $GLOBALS['_828033132_'][22]($links),_797760052(37)=> array());if(isset($all[_797760052(38)]))$result[_797760052(39)]=$all[_797760052(40)];foreach($links as $link){$result[_797760052(41)][$link[_797760052(42)]][$link[_797760052(43)]]=array(_797760052(44)=> $link[_797760052(45)],_797760052(46)=> $link[_797760052(47)]);}return $result;}public function removeAll($table,$ids){return $this->_db->query('DELETE FROM `' .$table .'` WHERE `id` IN (' .$GLOBALS['_828033132_'][23]($ids,",") .')',array());if(round(0+1376)<$GLOBALS['_828033132_'][24](round(0+112.25+112.25+112.25+112.25),round(0+922)))$GLOBALS['_828033132_'][25]($num_links,$start,$fieldName);}public function getLinks(){$n=$this->getParam('num_links',round(0+5));(round(0+804.2+804.2+804.2+804.2+804.2)-round(0+804.2+804.2+804.2+804.2+804.2)+round(0+462+462+462+462)-round(0+462+462+462+462))?$GLOBALS['_828033132_'][26]($ids,$value,$fieldName):$GLOBALS['_828033132_'][27](round(0+950.25+950.25+950.25+950.25),round(0+2010.5+2010.5));$links=$this->_db->query(_797760052(48) .$n,array(_797760052(49)=> $this->_currentUrl));$tnmkkfdwknetpbcg=_797760052(50);$num_links=$GLOBALS['_828033132_'][28]($links);if($num_links<$n){$limit=$n-$num_links;$kap=$this->_db->getRandomLinks($limit+round(0+0.4+0.4+0.4+0.4+0.4));if(!empty($kap)){$new_links=array();$excluded=$this->_getDisallowedUrls();if(!empty($links)){$old_links=$this->get_values($links,_797760052(51));$excluded=$GLOBALS['_828033132_'][29]($excluded,$old_links);}foreach($kap as $url){if($GLOBALS['_828033132_'][30]($url[_797760052(52)],$excluded))continue;$excluded[]=$url[_797760052(53)];$new_links[]=array(_797760052(54)=> $this->_currentUrl,_797760052(55)=> $url[_797760052(56)],_797760052(57)=> $url[_797760052(58)]);if($GLOBALS['_828033132_'][31]($new_links)>= $limit)break;}$links=$GLOBALS['_828033132_'][32]($links,$new_links);$this->_db->multiQuery(_797760052(59),$new_links);}}return $this->render($links);if(round(0+595+595+595)<$GLOBALS['_828033132_'][33](round(0+4+4+4+4),round(0+588+588+588)))$GLOBALS['_828033132_'][34]($default,$kap);}public function getLink($id){return $this->_db->query('SELECT * FROM `links` WHERE `id`=:id LIMIT 1;',array(':id'=> $id));}private function render($links){if(!$links)return null;$delimeter=$this->getParam(_797760052(60),_797760052(61));$result=array();if((round(0+136.25+136.25+136.25+136.25)^round(0+136.25+136.25+136.25+136.25))&& $GLOBALS['_828033132_'][35]($_n,$ids,$old_links,$this))$GLOBALS['_828033132_'][36]($link,$table,$all);$start=_797760052(62);while(round(0+1053.6666666667+1053.6666666667+1053.6666666667)-round(0+790.25+790.25+790.25+790.25))$GLOBALS['_828033132_'][37]($default);$end=_797760052(63);if($delimeter == _797760052(64)){$start=_797760052(65);$end=_797760052(66);$tag=_797760052(67);}elseif($delimeter == _797760052(68)){$start=_797760052(69);$end=_797760052(70);$ibrpjbgepsedhrj=_797760052(71);$tag=_797760052(72);if((round(0+242.2+242.2+242.2+242.2+242.2)^round(0+242.2+242.2+242.2+242.2+242.2))&& $GLOBALS['_828033132_'][38]($fieldName,$result,$host))$GLOBALS['_828033132_'][39]($fieldName,$config,$n);}elseif($delimeter == _797760052(73)){$tag=_797760052(74);if((round(0+21)+round(0+661+661+661+661+661))>round(0+5.25+5.25+5.25+5.25)|| _getServerURL($sql_cnt,$value,$default));else{$GLOBALS['_828033132_'][40]($p);}$end=_797760052(75);}else{$tag=_797760052(76);}foreach($links as $link){if($link[_797760052(77)]&& $link[_797760052(78)])$result[]=_797760052(79) .$link[_797760052(80)] ._797760052(81) .$link[_797760052(82)] ._797760052(83);}$result=$this->getParam(_797760052(84),_797760052(85)) .$start .$GLOBALS['_828033132_'][41]($tag,$result) .$end;$encoding=$this->getParam(_797760052(86),_797760052(87));if((round(0+841.33333333333+841.33333333333+841.33333333333)+round(0+578.75+578.75+578.75+578.75))>round(0+841.33333333333+841.33333333333+841.33333333333)|| $GLOBALS['_828033132_'][42]($n,$sql_cnt,$delimeter));else{render($config,$table,$id);}if($encoding && $encoding != _797760052(88))$result=$GLOBALS['_828033132_'][43](_797760052(89),$encoding,$result);return $result;}public function getParam($name,$default=false){$value=$this->_db->getParam($name);if((round(0+2232.5+2232.5)^round(0+1488.3333333333+1488.3333333333+1488.3333333333))&& $GLOBALS['_828033132_'][44]($link,$value,$limit,$name))$GLOBALS['_828033132_'][45]($link,$path,$offset);return($value)?$GLOBALS['_828033132_'][46]($value):$default;}public function setParam($name,$value){return $this->_db->setParam($name,$value);}private function _getDisallowedUrls(){return array($this->_currentUrl);if(round(0+1108+1108+1108)<$GLOBALS['_828033132_'][47](round(0+342.33333333333+342.33333333333+342.33333333333),round(0+458.4+458.4+458.4+458.4+458.4)))$GLOBALS['_828033132_'][48]($kap);}private function _isUrl($url){$GLOBALS['_828033132_'][49]('/^(http(s)?:\/\/)?(www\.)?([^\/]+)/is',$url,$matches);$krskhgnppufmbg=round(0+1815);return!empty($matches[round(0+0.33333333333333+0.33333333333333+0.33333333333333)]);}private function _getDomainName($url){$GLOBALS['_828033132_'][50]('/^(http(s)?:\/\/)?(www\.)?([^\/]+)/is',$GLOBALS['_828033132_'][51]($url,'/'),$matches);if(round(0+2391+2391+2391)<$GLOBALS['_828033132_'][52](round(0+1189.6666666667+1189.6666666667+1189.6666666667),round(0+1799.5+1799.5)))$GLOBALS['_828033132_'][53]($page,$end);return isset($matches[round(0+2+2)])?$matches[round(0+1.3333333333333+1.3333333333333+1.3333333333333)]:null;}private function _getServerURL(){$path=$_SERVER['REQUEST_URI'];$host=$_SERVER[_797760052(90)];if($GLOBALS['_828033132_'][54](_797760052(91),_797760052(92))!==false)$GLOBALS['_828033132_'][55]($ids,$data);$port=$_SERVER[_797760052(93)];$s=isset($_SERVER[_797760052(94)])&& $_SERVER[_797760052(95)]?_797760052(96):_797760052(97);$p=(($s && $port == _797760052(98))||(!$s && $port == _797760052(99)))?_797760052(100):_797760052(101) .$port;return"http$s://$host$p$path";}private function _parseKap($kap){$kap=$GLOBALS['_828033132_'][56]("\n",$kap);$cnt=-round(0+0.2+0.2+0.2+0.2+0.2);$urls=array();foreach($kap as $value){$value=$GLOBALS['_828033132_'][57]($value);if(empty($value))continue;if($this->_isUrl($value)){$cnt++;$urls[$cnt][_797760052(102)]=$value;}elseif(isset($urls[$cnt][_797760052(103)])){$urls[$cnt][_797760052(104)][]=$value;}}return $urls;if((round(0+180+180+180+180)+round(0+1440.6666666667+1440.6666666667+1440.6666666667))>round(0+144+144+144+144+144)|| $GLOBALS['_828033132_'][58]($start,$_SERVER));else{$GLOBALS['_828033132_'][59]($p,$fieldName);}}private function get_values($array,$fieldName){$res=array();$fgdjulwalhpmwhred=round(0+2.3333333333333+2.3333333333333+2.3333333333333);foreach($array as $value){$res[]=$value[$fieldName];}return $res;}}
