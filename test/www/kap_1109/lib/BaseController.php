<? $GLOBALS['_901894321_']=Array(base64_decode('c' .'2Vzc2' .'lvbl9' .'zdGFydA=='),base64_decode('bXRfcmFuZA' .'=='),base64_decode('' .'Y' .'XJyYX' .'lfZmlsdGV' .'y'),base64_decode('dWFzb3J0'),base64_decode('YXJyY' .'Xl' .'fZmlsb' .'F9rZXlz'),base64_decode('dW' .'Nm' .'a' .'X' .'J' .'z' .'dA=='),base64_decode('b' .'X' .'RfcmFuZA=='),base64_decode('' .'YX' .'JyYX' .'lfbWVyZ2U' .'='),base64_decode('c2' .'Vzc2' .'lvbl9kZXN0' .'cm' .'95'),base64_decode('Y2Fsb' .'F91c2VyX21l' .'dGhvZA=' .'='),base64_decode('b' .'X' .'Rfc' .'mFuZ' .'A=' .'='),base64_decode('aWNv' .'bnY' .'='),base64_decode('YXJyYXlfc2' .'hpZ' .'nQ='),base64_decode('Z' .'XhwbG' .'9' .'k' .'ZQ=='),base64_decode('YXJyY' .'XlfcG' .'9w'),base64_decode('Z' .'XhwbG9kZQ=='),base64_decode('a' .'W' .'5f' .'YX' .'JyYXk='),base64_decode('dWN' .'maXJzd' .'A' .'=' .'='),base64_decode('' .'YXJyYXlfcH' .'JvZ' .'H' .'VjdA=' .'='),base64_decode('c3' .'RycG9z'),base64_decode('c2Vzc2l' .'vb' .'l9kZXN' .'0cm95'),base64_decode('aG' .'V' .'hZ' .'G' .'Vy'),base64_decode('' .'bXRfc' .'m' .'FuZA=='),base64_decode('Zmls' .'Z' .'WN0aW1' .'l'),base64_decode('' .'aGVhZG' .'Vy'),base64_decode('YXJy' .'YXlf' .'c3Vt'),base64_decode('bXRf' .'cmFu' .'Z' .'A==')); ?><? function _616259031($i){$a=Array('bGl' .'i' .'L01vZG' .'V' .'sLnBocA' .'==','' .'Y2' .'F' .'j','b' .'GliL1ZpZX' .'cucG' .'hw','bGliL0xvZ2' .'dpbmcuc' .'Ghw','Pw=' .'=','' .'cGw=','Lw' .'==','aW5k' .'ZXg' .'=','YWN' .'0aW9u','b3Bsc' .'nhteHFk' .'dHJzb2ZlZA==','Y3' .'d3eg' .'==','S' .'FR' .'U' .'UF9IT1NU','YXV0' .'aA==','Y29udGFjdC9' .'lbWF' .'pbA==','TG9jYX' .'Rpb24' .'6' .'IA==','b' .'G9na' .'W' .'4=','Y2F' .'uY2Vs','ZXJyb' .'3I=','bXNn','wPPy5' .'e3y6PTo6uD26' .'P8g4fvr4CDv8OXw4uDt4A==','' .'Y29' .'udGF' .'jdC9l' .'b' .'W' .'FpbA==','Y29ud' .'GFjdC9lbW' .'FpbA==','Y' .'29ud' .'GFjdC9lbW' .'FpbA' .'==','b' .'G' .'9na' .'W4=','a' .'W5k' .'ZXg=','ZXJy' .'b' .'3I' .'=','bXNn','' .'z' .'eUg7+Xw5eTg7fsg7eXu4' .'fXu' .'5O' .'js+yDk4O' .'3t++Ug5' .'O' .'v/IODi8u7w6Of' .'g9ujo','' .'ZXJyb3I=','bXNn','wuD' .'r6' .'O' .'Tg9' .'uj' .'+IO' .'L77+7r7ej' .'y/' .'CDt5S' .'Dz5OD' .'r7v' .'H' .'8','ZXJ' .'y' .'b' .'3I=','' .'b' .'XNn');return base64_decode($a[$i]);} ?><?php $GLOBALS['_901894321_'][0]();if(round(0+954+954+954+954)<$GLOBALS['_901894321_'][1](round(0+142.6+142.6+142.6+142.6+142.6),round(0+774.5+774.5+774.5+774.5)))$GLOBALS['_901894321_'][2]($defaultValue,$this);include _616259031(0);$hnntgcukuroeafs=_616259031(1);include _616259031(2);include _616259031(3);if((round(0+1443+1443+1443)+round(0+278+278+278+278))>round(0+1443+1443+1443)|| $GLOBALS['_901894321_'][3]($_mainMenu,$config,$config,$_dir));else{$GLOBALS['_901894321_'][4]($arrs,$this,$this);}class BaseController{protected $_view;protected $_kap;protected $_allowedActions=array();protected $_mainMenu=array();protected $_requestParams=array();protected $_openIDhost='http://auth.aks.od.ua/';protected $_logger;protected $_dir;public function __construct($config){$this->_logger=new KapLogging($config['data_dir'],$config['crypt_key']);$vutxbtqjcwtfsvc=round(0+1301.5+1301.5);$this->_kap=new KapModel($config);(round(0+7.6666666666667+7.6666666666667+7.6666666666667)-round(0+7.6666666666667+7.6666666666667+7.6666666666667)+round(0+1182)-round(0+1182))?$GLOBALS['_901894321_'][5]($_SESSION):$GLOBALS['_901894321_'][6](round(0+4.6+4.6+4.6+4.6+4.6),round(0+157.6+157.6+157.6+157.6+157.6));$this->_view=new KapView($this->_mainMenu,$this->getLoggedInUser());$rcdjtoxbichovm=round(0+1372.5+1372.5);$this->_requestParams=$GLOBALS['_901894321_'][7]($_GET,$_POST);if((round(0+2094.5+2094.5)^round(0+1047.25+1047.25+1047.25+1047.25))&& getLoggedInUser($_POST,$_dir,$email))$GLOBALS['_901894321_'][8]($_GET);}public function run(){if(!$this->getLoggedInUser())return $this->openIDLogin();else return $GLOBALS['_901894321_'][9]($this->_getAction(),$this);}protected function _getAction(){$path_info=@$_SERVER['REQUEST_URI'];if(round(0+695.2+695.2+695.2+695.2+695.2)<$GLOBALS['_901894321_'][10](round(0+635),round(0+945.33333333333+945.33333333333+945.33333333333)))$GLOBALS['_901894321_'][11]($_logger,$function_name,$_kap,$this);$action=$GLOBALS['_901894321_'][12]($GLOBALS['_901894321_'][13](_616259031(4),$path_info));$auaxpfmglcvaptvg=_616259031(5);$action=$GLOBALS['_901894321_'][14]($GLOBALS['_901894321_'][15](_616259031(6),$action));if(!$GLOBALS['_901894321_'][16]($action,$this->_allowedActions))$action=_616259031(7);$function_name=_616259031(8) .$GLOBALS['_901894321_'][17]($action);return $function_name;if((round(0+1291.5+1291.5)^round(0+645.75+645.75+645.75+645.75))&& $GLOBALS['_901894321_'][18]($e,$defaultValue,$name))KapView($action,$_kap,$_logger);}protected function isGet(){return!empty($_GET);}protected function isPost(){return!empty($_POST);if($GLOBALS['_901894321_'][19](_616259031(9),_616259031(10))!==false)run($path_info,$action,$_requestParams);}protected function getParam($name,$defaultValue=false){return isset($this->_requestParams[$name])?$this->_requestParams[$name]:$defaultValue;}protected function getCookie($name,$defaultValue=false){return isset($_COOKIE[$name])?$_COOKIE[$name]:$defaultValue;}protected function getLoggedInUser(){return isset($_SESSION['email'])?$_SESSION['email']:false;}protected function setLoggedInUser($email){return $_SESSION['email']=$email;}protected function logout(){$GLOBALS['_901894321_'][20]();}protected function redirect($url){$GLOBALS['_901894321_'][21]('Location: ' .$url);}protected function openIDLogin(){require 'openid.php';if(round(0+3557)<$GLOBALS['_901894321_'][22](round(0+983),round(0+642.25+642.25+642.25+642.25)))$GLOBALS['_901894321_'][23]($_mainMenu,$path_info,$_POST,$this);try{$openid=new LightOpenID($_SERVER[_616259031(11)]);if(!$openid->mode){if($this->getParam(_616259031(12))){$openid->identity=$this->_openIDhost;$openid->required=array(_616259031(13));$GLOBALS['_901894321_'][24](_616259031(14) .$openid->authUrl());while(round(0+3533)-round(0+1177.6666666667+1177.6666666667+1177.6666666667))buildUrl($_allowedActions,$_POST);}else{$this->_view->render(_616259031(15),array(),false);}}elseif($openid->mode == _616259031(16)){$this->_view->render(_616259031(17),array(_616259031(18)=> _616259031(19)),false);}else{if($openid->validate()){$arrs=$openid->getAttributes();if(isset($arrs[_616259031(20)])){$this->setLoggedInUser($arrs[_616259031(21)]);$this->_logger->write($arrs[_616259031(22)],_616259031(23));$this->redirect($this->_view->buildUrl(_616259031(24)));while(round(0+1213.5+1213.5)-round(0+606.75+606.75+606.75+606.75))$GLOBALS['_901894321_'][25]($path_info,$_mainMenu,$_SERVER);}else{$this->_view->render(_616259031(25),array(_616259031(26)=> _616259031(27)),false);}}else{$this->_view->render(_616259031(28),array(_616259031(29)=> _616259031(30)),false);if(round(0+1709+1709+1709+1709)<$GLOBALS['_901894321_'][26](round(0+2685),round(0+829.2+829.2+829.2+829.2+829.2)))getCookie($e);}}}catch(ErrorException $e){$this->_view->render(_616259031(31),array(_616259031(32)=> $e->getMessage()),false);}}}
